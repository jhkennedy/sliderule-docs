# Including ArcticDEM Samples

2022-12-23


## Overview

This tutorial walks you through the steps necessary to sample the ArcticDEM at the location of each elevation generated by an `atl06p` request.  The DEM value is returned as an additional column in the GeoDataFrame.

For a full set of code associated with this tutorial, see: https://github.com/ICESat2-SlideRule/sliderule-python/blob/development/examples/arcticdem.ipynb.

**Prerequisites**: This walk-through assumes you have already installed the SlideRule Python client and familiar with how to use it. See the [installation](../../getting_started/Install.html) instructions in the reference documentation if you need help installing the SlideRule Python client.  See the [Making Your First Request](./first_request.html) tutorial if you've never made a SlideRule processing request before.


## Background

The ArcticDEM is a high-resolution digital surface model of the Arctic, produced by the Polar Geospatial Center at the University of Minnesota, and hosted in a public S3 bucket in the AWS us-west-2 data center. SlideRule is able to associate a elevations sampled from the ArcticDEM with each elevation generated from ICESat-2's photon cloud data.  The combined dataset provides a side-by-side comparison of ATL06-SR elevations with ArcticDEM elevations.

<TODO: describe the difference between the mosaic and strip datasets>


## Sampling the ArcticDEM mosaic in an `atl06p` request

The __"samples"__ parameter is used to request ArcticDEM samples be included in `atl06p` responses.  For the ArcticDEM, there are two possible values that can be provided: _"arcticdem-mosaic"_ and _"arcticdem-strips"_.


__Step 1__: Import and initialize the SlideRule Python package for ICESat-2.
```python
>>> from sliderule import icesat2
>>> icesat2.init("slideruleearth.io")
```

__Step 2__: Create parameters for a typical `atl06p` processing request.
```python
>>> grand_mesa = icesat2.toregion('dicksonfjord.geojson')
>>> parms = {
    "poly": grand_mesa["poly"],
    "srt": icesat2.SRT_LAND,
    "cnf": icesat2.CNF_SURFACE_HIGH,
    "len": 40.0,
    "res": 20.0,
    "maxi": 6
}
```
The **dicksonfjord.geojson** file used in this example can be downloaded by navigating to our [downloads](/rtd/tutorials/downloads.html) page; alternatively, you can create your own GeoJSON file at [geojson.io](https://geojson.io).  Be sure that your region of interest is in the arctic, otherwise there will be no data in the ArcticDEM for it.

__Step 3__: Specify sampling the ArcticDEM mosaic.
```python
>>> parms["samples"] = ["articdem-mosaic"]
```

__Step 4__: Issue the processing request to SlideRule, for only a single granule (to keep the data volume down).
```python
>>> resource = "ATL03_20190314093716_11600203_005_01.h5"
>>> gdf = icesat2.atl06p(parms, resources=[resource])
```
When this completes (~10 seconds), the _gdf_ variable should now contain all of the results of the elevations calculated by SlideRule with a corresponding column for the "arcticdem-mosaic".  Note that the granule provided must be in the region of interest.

__Step 5__: Display a summary of the results.
```python
>>> print(gdf)
	h_sigma 	pflags 	h_mean 	gt 	spot 	rgt 	rms_misfit 	delta_time 	distance 	w_surface_window_final 	segment_id 	dh_fit_dy 	dh_fit_dx 	cycle 	n_fit_photons 	geometry 	arcticdem-mosaic-1980-01-06 	delta
time
2019-03-14 09:40:46.282934432 	0.551360 	0 	543.005174 	10 	1 	1160 	0.874532 	3.779165e+07 	8.121494e+06 	25.891558 	405226 	0.0 	1.015072 	2 	12 	POINT (-26.27920 72.77984) 	550.909729 	-7.904555
2019-03-14 09:40:46.284351344 	0.246645 	0 	551.058714 	10 	1 	1160 	1.308783 	3.779165e+07 	8.121504e+06 	16.985016 	405227 	0.0 	0.665647 	2 	32 	POINT (-26.27924 72.77993) 	559.673889 	-8.615175
2019-03-14 09:40:46.285767320 	1.144088 	0 	557.156110 	10 	1 	1160 	1.318949 	3.779165e+07 	8.121514e+06 	15.909042 	405227 	0.0 	0.623423 	2 	20 	POINT (-26.27928 72.78002) 	567.251282 	-10.095171
2019-03-14 09:40:46.291444880 	0.187902 	0 	594.468321 	10 	1 	1160 	0.263953 	3.779165e+07 	8.121554e+06 	3.000000 	405229 	0.0 	0.082324 	2 	15 	POINT (-26.27943 72.78037) 	594.901855 	-0.433535
2019-03-14 09:40:46.292858704 	0.059746 	0 	595.268325 	10 	1 	1160 	0.269889 	3.779165e+07 	8.121564e+06 	3.000000 	405230 	0.0 	0.074614 	2 	27 	POINT (-26.27947 72.78046) 	597.673462 	-2.405137
... 	... 	... 	... 	... 	... 	... 	... 	... 	... 	... 	... 	... 	... 	... 	... 	... 	... 	...
2019-03-14 09:40:48.353273584 	0.053913 	0 	1497.294367 	20 	2 	1160 	0.280013 	3.779165e+07 	8.133741e+06 	3.000000 	405838 	0.0 	-0.021866 	2 	27 	POINT (-26.32802 72.88865) 	1494.036499 	3.257868
2019-03-14 09:40:48.354683848 	0.114113 	0 	1497.036678 	20 	2 	1160 	0.330651 	3.779165e+07 	8.133751e+06 	3.000000 	405839 	0.0 	-0.028824 	2 	15 	POINT (-26.32806 72.88874) 	1492.975098 	4.061580
2019-03-14 09:40:48.356088496 	0.046961 	0 	1496.055088 	20 	2 	1160 	0.132604 	3.779165e+07 	8.133761e+06 	3.000000 	405839 	0.0 	-0.112578 	2 	8 	POINT (-26.32810 72.88882) 	1491.894531 	4.160556
2019-03-14 09:40:48.357494344 	0.032820 	0 	1494.952556 	20 	2 	1160 	0.124317 	3.779165e+07 	8.133771e+06 	3.000000 	405840 	0.0 	-0.106287 	2 	16 	POINT (-26.32814 72.88891) 	1491.201050 	3.751506
2019-03-14 09:40:48.358898136 	0.028111 	0 	1494.040127 	20 	2 	1160 	0.117033 	3.779165e+07 	8.133781e+06 	3.000000 	405840 	0.0 	-0.078550 	2 	19 	POINT (-26.32818 72.88900) 	1490.621094 	3.419034

1650 rows Ã— 18 columns
```
For a full description of all of the fields returned from the `atl06p` function, see the [elevations](../../user_guide/ICESat-2.html#elevations) documentation.

